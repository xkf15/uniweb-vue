{"version":3,"sources":["../../../src/router/index.js"],"names":["use","router","mode","base","__dirname","routes","path","component","children","redirect","beforeEach","to","from","next","token","sessionStorage","getItem","axios","create","defaults","headers","common"],"mappings":";;;;;;AAAA;;;;AACA;;;;AAGA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,cAAIA,GAAJ;;AAEA,IAAMC,SAAS,wBAAW;AACxBC,QAAM,SADkB;AAExBC,QAAMC,SAFkB;AAGxBC,UAAQ,CACN;AACEC,UAAM,GADR;AAEEC,mCAFF;AAGEC,cAAU,CACR,EAAEF,MAAM,EAAR,EAAYG,UAAU,OAAtB,EADQ,EAER,EAAEH,MAAM,OAAR,EAAiBC,0BAAjB,EAFQ,EAGR,EAAED,MAAM,QAAR,EAAkBC,2BAAlB,EAHQ;AAHZ,GADM,EAUN,EAAED,MAAM,OAAR,EAAiBG,UAAU,YAA3B,EAVM,EAWN;AACEH,UAAM,YADR;AAEEC,6BAFF;AAGEC,cAAU,CACR,EAAEF,MAAM,EAAR,EAAYG,UAAU,OAAtB,EADQ,EAER,EAAEH,MAAM,OAAR,EAAiBC,0BAAjB,EAFQ,EAGR;AACED,YAAM,KADR;AAEEC,kCAFF;AAGEC,gBAAU,CACR,EAAEF,MAAM,EAAR,EAAYG,UAAU,OAAtB,EADQ,EAER,EAAEH,MAAM,OAAR,EAAiBC,8BAAjB,EAFQ,EAGR,EAAED,MAAM,QAAR,EAAkBC,+BAAlB,EAHQ,EAIR,EAAED,MAAM,SAAR,EAAmBC,4BAAnB,EAJQ,EAKR,EAAED,MAAM,SAAR,EAAmBC,4BAAnB,EALQ;AAHZ,KAHQ;AAHZ,GAXM,EA8BN,EAAED,MAAM,gBAAR,EAA0BG,UAAU,OAApC,EA9BM,EA+BN,EAAEH,MAAM,oBAAR;AACEC,iCADF;AAEEC,cAAU,CACR,EAAEF,MAAM,EAAR,EAAYG,UAAU,MAAtB,EADQ,EAER,EAAEH,MAAM,MAAR,EAAgBC,yBAAhB,EAFQ,EAGR,EAAED,MAAM,QAAR,EAAkBC,2BAAlB,EAHQ,EAIR,EAAED,MAAM,SAAR,EAAmBC,4BAAnB,EAJQ,EAKR,EAAED,MAAM,UAAR,EAAoBC,6BAApB,EALQ,EAMR,EAAED,MAAM,YAAR,EAAsBG,UAAU,SAAhC,EANQ,EAOR,EAAEH,MAAM,mBAAR,EAA6BC,2BAA7B,EAPQ,EAQR,EAAED,MAAM,0BAAR,EAAoCC,kCAApC,EARQ;AAFZ,GA/BM;AAHgB,CAAX,CAAf;;AAkDAN,OAAOS,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAMC,QAAQC,eAAeC,OAAf,CAAuB,WAAvB,CAAd;AACA,MAAIL,GAAGL,IAAH,KAAY,GAAZ,IAAmBK,GAAGL,IAAH,KAAY,QAA/B,IAA2CK,GAAGL,IAAH,KAAY,SAA3D,EAAsE;AACpE,QAAIQ,UAAU,MAAV,IAAoBA,UAAU,IAAlC,EAAwC;AACtCD,WAAK,YAAL;AACD;AACDA;AACD,GALD,MAKO;AACL,QAAIC,UAAU,MAAV,IAAoBA,UAAU,IAAlC,EAAwC;AACtC,oBAAIG,KAAJ,CAAUC,MAAV,GAAmBC,QAAnB,CAA4BC,OAA5B,CAAoCC,MAApC,CAA2C,eAA3C,IAA8D,WAAWP,KAAzE;AAEAD;AACD,KAJD,MAIOA,KAAK,GAAL;AACR;AACF,CAdD;;kBAgBeZ,M","file":"index.js","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\n// import Hello from '@/components/Hello'\n\nimport HomeLayout from '@/components/common/HomeLayout'\nimport Login from '@/components/pages/Login'\nimport Signup from '@/components/pages/Signup'\n\nimport Room from '@/components/pages/user/Room'\nimport RoomAdmin from '@/components/pages/user/room/Admin'\n\nimport NewRoom from '@/components/pages/user/room/NewRoom'\nimport BasicInfo from '@/components/pages/user/room/new/BasicInfo'\nimport MemberInfo from '@/components/pages/user/room/new/MemberInfo'\nimport Confirm from '@/components/pages/user/room/new/Confirm'\nimport Publish from '@/components/pages/user/room/new/Publish'\n\nimport Activity from '@/components/pages/user/Activity'\nimport Info from '@/components/pages/user/activity/Info'\nimport Member from '@/components/pages/user/activity/Member'\nimport Message from '@/components/pages/user/activity/Message'\nimport Settings from '@/components/pages/user/activity/Settings'\nimport Notice from '@/components/pages/user/activity/newMessage/Notice'\nimport Questionnaire from '@/components/pages/user/activity/newMessage/Questionnaire'\n\nVue.use(Router)\n\nconst router = new Router({\n  mode: 'history',\n  base: __dirname,\n  routes: [\n    {\n      path: '/',\n      component: HomeLayout,\n      children: [\n        { path: '', redirect: 'login' },\n        { path: 'login', component: Login },\n        { path: 'signup', component: Signup }\n      ]\n    },\n    { path: '/user', redirect: '/user/room' },\n    {\n      path: '/user/room',\n      component: Room,\n      children: [\n        { path: '', redirect: 'admin' },\n        { path: 'admin', component: RoomAdmin },\n        {\n          path: 'new',\n          component: NewRoom,\n          children: [\n            { path: '', redirect: 'basic' },\n            { path: 'basic', component: BasicInfo },\n            { path: 'member', component: MemberInfo },\n            { path: 'confirm', component: Confirm },\n            { path: 'publish', component: Publish }\n          ]\n        }\n      ]\n    },\n    { path: '/user/activity', redirect: '/user' },\n    { path: '/user/activity/:id',\n      component: Activity,\n      children: [\n        { path: '', redirect: 'info' },\n        { path: 'info', component: Info },\n        { path: 'member', component: Member },\n        { path: 'message', component: Message },\n        { path: 'settings', component: Settings },\n        { path: 'newMessage', redirect: 'message' },\n        { path: 'newMessage/notice', component: Notice },\n        { path: 'newMessage/questionnaire', component: Questionnaire }\n      ]\n    }\n  ]\n})\n\nrouter.beforeEach((to, from, next) => {\n  const token = sessionStorage.getItem('uni-token')\n  if (to.path === '/' || to.path === '/login' || to.path === '/signup') { // 如果是跳转到登录页的\n    if (token !== 'null' && token !== null) {\n      next('/user/room') // 如果有token就转向todolist不返回登录页\n    }\n    next() // 否则跳转回登录页\n  } else {\n    if (token !== 'null' && token !== null) {\n      Vue.axios.create().defaults.headers.common['Authorization'] = 'Token ' + token // 此为Django项目的token\n      // Vue.axios.create().defaults.headers.common['Authorization'] = 'Bearer ' + token // 此为jwt的token\n      next() // 如果有token就正常转向\n    } else next('/') // 否则跳转回登录页\n  }\n})\n\nexport default router\n"]}