{"version":3,"sources":["../../../src/router/index.js"],"names":["use","router","mode","base","__dirname","routes","path","redirect","component","children","beforeEach","to","from","next","token","sessionStorage","getItem","axios","create","defaults","headers","common"],"mappings":";;;;;;AAAA;;;;AACA;;;;AAGA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,cAAIA,GAAJ;;AAEA,IAAMC,SAAS,wBAAW;AACxBC,QAAM,SADkB;AAExBC,QAAMC,SAFkB;AAGxBC,UAAQ,CACN,EAAEC,MAAM,GAAR,EAAaC,UAAU,QAAvB,EADM,EAEN,EAAED,MAAM,QAAR,EAAkBE,0BAAlB,EAFM,EAGN,EAAEF,MAAM,OAAR,EAAiBC,UAAU,YAA3B,EAHM,EAIN;AACED,UAAM,YADR;AAEEE,6BAFF;AAGEC,cAAU,CACR,EAAEH,MAAM,EAAR,EAAYC,UAAU,OAAtB,EADQ,EAER,EAAED,MAAM,OAAR,EAAiBE,0BAAjB,EAFQ,EAGR;AACEF,YAAM,KADR;AAEEE,kCAFF;AAGEC,gBAAU,CACR,EAAEH,MAAM,EAAR,EAAYC,UAAU,OAAtB,EADQ,EAER,EAAED,MAAM,OAAR,EAAiBE,8BAAjB,EAFQ,EAGR,EAAEF,MAAM,QAAR,EAAkBE,+BAAlB,EAHQ,EAIR,EAAEF,MAAM,SAAR,EAAmBE,4BAAnB,EAJQ,EAKR,EAAEF,MAAM,SAAR,EAAmBE,4BAAnB,EALQ;AAHZ,KAHQ;AAHZ,GAJM,EAuBN,EAAEF,MAAM,gBAAR,EAA0BC,UAAU,OAApC,EAvBM,EAwBN,EAAED,MAAM,oBAAR;AACEE,iCADF;AAEEC,cAAU,CACR,EAAEH,MAAM,EAAR,EAAYC,UAAU,MAAtB,EADQ,EAER,EAAED,MAAM,MAAR,EAAgBE,yBAAhB,EAFQ,EAGR,EAAEF,MAAM,QAAR,EAAkBE,2BAAlB,EAHQ,EAIR,EAAEF,MAAM,SAAR,EAAmBE,4BAAnB,EAJQ;AAFZ,GAxBM;AAHgB,CAAX,CAAf;;AAuCAP,OAAOS,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAMC,QAAQC,eAAeC,OAAf,CAAuB,WAAvB,CAAd;AACA,MAAIL,GAAGL,IAAH,KAAY,GAAZ,IAAmBK,GAAGL,IAAH,KAAY,QAAnC,EAA6C;AAC3C,QAAIQ,UAAU,MAAV,IAAoBA,UAAU,IAAlC,EAAwC;AACtCD,WAAK,YAAL;AACD;AACDA;AACD,GALD,MAKO;AACL,QAAIC,UAAU,MAAV,IAAoBA,UAAU,IAAlC,EAAwC;AACtC,oBAAIG,KAAJ,CAAUC,MAAV,GAAmBC,QAAnB,CAA4BC,OAA5B,CAAoCC,MAApC,CAA2C,eAA3C,IAA8D,WAAWP,KAAzE;AACAD;AACD,KAHD,MAGOA,KAAK,GAAL;AACR;AACF,CAbD;;kBAeeZ,M","file":"index.js","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\n// import Hello from '@/components/Hello'\n\nimport Login from '@/components/pages/Login'\n\nimport Room from '@/components/pages/user/Room'\nimport RoomAdmin from '@/components/pages/user/room/Admin'\n\nimport NewRoom from '@/components/pages/user/room/NewRoom'\nimport BasicInfo from '@/components/pages/user/room/new/BasicInfo'\nimport MemberInfo from '@/components/pages/user/room/new/MemberInfo'\nimport Confirm from '@/components/pages/user/room/new/Confirm'\nimport Publish from '@/components/pages/user/room/new/Publish'\n\nimport Activity from '@/components/pages/user/Activity'\nimport Info from '@/components/pages/user/activity/Info'\nimport Member from '@/components/pages/user/activity/Member'\nimport Message from '@/components/pages/user/activity/Message'\n\nVue.use(Router)\n\nconst router = new Router({\n  mode: 'history',\n  base: __dirname,\n  routes: [\n    { path: '/', redirect: '/login' },\n    { path: '/login', component: Login },\n    { path: '/user', redirect: '/user/room' },\n    {\n      path: '/user/room',\n      component: Room,\n      children: [\n        { path: '', redirect: 'admin' },\n        { path: 'admin', component: RoomAdmin },\n        {\n          path: 'new',\n          component: NewRoom,\n          children: [\n            { path: '', redirect: 'basic' },\n            { path: 'basic', component: BasicInfo },\n            { path: 'member', component: MemberInfo },\n            { path: 'confirm', component: Confirm },\n            { path: 'publish', component: Publish }\n          ]\n        }\n      ]\n    },\n    { path: '/user/activity', redirect: '/user' },\n    { path: '/user/activity/:id',\n      component: Activity,\n      children: [\n        { path: '', redirect: 'info' },\n        { path: 'info', component: Info },\n        { path: 'member', component: Member },\n        { path: 'message', component: Message }\n      ]\n    }\n  ]\n})\n\nrouter.beforeEach((to, from, next) => {\n  const token = sessionStorage.getItem('uni-token')\n  if (to.path === '/' || to.path === '/login') { // 如果是跳转到登录页的\n    if (token !== 'null' && token !== null) {\n      next('/user/room') // 如果有token就转向todolist不返回登录页\n    }\n    next() // 否则跳转回登录页\n  } else {\n    if (token !== 'null' && token !== null) {\n      Vue.axios.create().defaults.headers.common['Authorization'] = 'Token ' + token // 注意Token后有个空格\n      next() // 如果有token就正常转向\n    } else next('/') // 否则跳转回登录页\n  }\n})\n\nexport default router\n"]}