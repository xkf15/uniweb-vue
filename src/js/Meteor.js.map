{"version":3,"sources":["../../../src/js/Meteor.js"],"names":["Meteor","ctx","x","h","y","vx","Math","random","vy","len","gra","createRadialGradient","PI","addColorStop","save","fillStyle","beginPath","arc","lineTo","closePath","fill","restore"],"mappings":";;;;;;;;;;;;;;;;IAAqBA,M;AACjB,oBAAYC,GAAZ,EAAiBC,CAAjB,EAAoBC,CAApB,EAAuB;AAAA;;AACnB,aAAKF,GAAL,GAAWA,GAAX;AACA,aAAKC,CAAL,GAASA,CAAT;AACA,aAAKE,CAAL,GAAS,CAAT;AACA,aAAKD,CAAL,GAASA,CAAT;AACA,aAAKE,EAAL,GAAU,EAAE,IAAIC,KAAKC,MAAL,KAAgB,CAAtB,CAAV;AACA,aAAKC,EAAL,GAAU,CAAC,KAAKH,EAAhB;AACA,aAAKI,GAAL,GAAWH,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,GAAjC;AACH;;;;+BAEM;AAEH,gBAAI,KAAKL,CAAL,GAAS,CAAC,KAAKO,GAAf,IAAsB,KAAKL,CAAL,GAAS,KAAKD,CAAL,GAAS,KAAKM,GAAjD,EAAsD;AAClD,uBAAO,KAAP;AACH;AACD,iBAAKP,CAAL,IAAU,KAAKG,EAAf;AACA,iBAAKD,CAAL,IAAU,KAAKI,EAAf;AACA,mBAAO,IAAP;AACH;;;+BAEM;AACH,gBAAIP,MAAM,KAAKA,GAAf;AAAA,gBAEIS,MAAMT,IAAIU,oBAAJ,CACF,KAAKT,CADH,EACM,KAAKE,CADX,EACc,CADd,EACiB,KAAKF,CADtB,EACyB,KAAKE,CAD9B,EACiC,KAAKK,GADtC,CAFV;;AAKA,gBAAMG,KAAKN,KAAKM,EAAhB;AACAF,gBAAIG,YAAJ,CAAiB,CAAjB,EAAoB,qBAApB;AACAH,gBAAIG,YAAJ,CAAiB,CAAjB,EAAoB,eAApB;AACAZ,gBAAIa,IAAJ;AACAb,gBAAIc,SAAJ,GAAgBL,GAAhB;AACAT,gBAAIe,SAAJ;;AAEAf,gBAAIgB,GAAJ,CAAQ,KAAKf,CAAb,EAAgB,KAAKE,CAArB,EAAwB,CAAxB,EAA2BQ,KAAK,CAAhC,EAAmC,IAAIA,EAAJ,GAAS,CAA5C;;AAEAX,gBAAIiB,MAAJ,CAAW,KAAKhB,CAAL,GAAS,KAAKO,GAAzB,EAA8B,KAAKL,CAAL,GAAS,KAAKK,GAA5C;AACAR,gBAAIkB,SAAJ;AACAlB,gBAAImB,IAAJ;AACAnB,gBAAIoB,OAAJ;AACH;;;;;kBAxCgBrB,M","file":"Meteor.js","sourcesContent":["export default class Meteor {\n    constructor(ctx, x, h) {\n        this.ctx = ctx\n        this.x = x\n        this.y = 0\n        this.h = h\n        this.vx = -(4 + Math.random() * 4)\n        this.vy = -this.vx\n        this.len = Math.random() * 300 + 500\n    }\n\n    flow() {\n        //判定流星出界\n        if (this.x < -this.len || this.y > this.h + this.len) {\n            return false\n        }\n        this.x += this.vx\n        this.y += this.vy\n        return true\n    }\n\n    draw() {\n        let ctx = this.ctx,\n            //径向渐变，从流星头尾圆心，半径越大，透明度越高\n            gra = ctx.createRadialGradient(\n                this.x, this.y, 0, this.x, this.y, this.len)\n\n        const PI = Math.PI\n        gra.addColorStop(0, 'rgba(255,255,255,1)')\n        gra.addColorStop(1, 'rgba(0,0,0,0)')\n        ctx.save()\n        ctx.fillStyle = gra\n        ctx.beginPath()\n        //流星头，二分之一圆\n        ctx.arc(this.x, this.y, 1, PI / 4, 5 * PI / 4)\n        //绘制流星尾，三角形\n        ctx.lineTo(this.x + this.len, this.y - this.len)\n        ctx.closePath()\n        ctx.fill()\n        ctx.restore()\n    }\n}"]}